{"version":3,"sources":["file:///E:/2.workspace/cocos%20creator/slot/SlotMachine/assets/scripts/ReelController.ts"],"names":["_decorator","Component","Prefab","ccclass","property","ReelController","type","_firstDelay","_count","start","setStartDelay","delay","setCount","count","moveNextStatus","len","node","children","i","length","self","pos","position","cc","tween","to","v3","y","call","movingFinished","console","log","setPosition"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('ReelController')\nexport class ReelController extends Component {\n\n\n    @property({type: Prefab})\n    protected stops: Prefab[] = [];\n\n\n\n    private _firstDelay: number = 0;\n    private _count: number = 0;\n\n    start() {\n\n    }\n\n    setStartDelay(delay) {\n        this._firstDelay = delay;\n    }\n\n    setCount(count) {\n        this._count = count;\n    }\n\n    moveNextStatus() {\n\n        var len = this.node.children[i].length;\n        var self = this;\n        for (var i = 0; i < len; i ++) {\n            var pos = this.node.children[i].position;\n\n            if (i == len - 1) {\n                cc.tween(this.node.children[i])\n                    .delay(this._firstDelay)\n                    .to(0.1, { position: cc.v3(0, pos.y-76, 0) })\n                    .call(() => {\n                        self.movingFinished();\n                    })\n                .start();\n            } else {\n                cc.tween(this.node.children[i])\n                    .to(0.1, { position: cc.v3(0, pos.y-76, 0) })\n                .start();\n            }\n        }\n\n        this._firstDelay = 0;\n    }\n\n    movingFinished() {\n\n        var len = this.node.children[i].length;\n        for (var i = 0; i < len; i ++) {\n            var pos = this.node.children[i].position;\n            console.log (pos);\n            if(pos.y < -10)  this.node.children[i].setPosition(cc.v3(0, len * 76 - 76, 0));\n        }\n\n        for (var i = 0; i < len; i ++) {\n            console.log('---------');\n            console.log (this.node.children[i].position);\n        }\n\n        this._count --;\n        if(this._count > 0)\n            this.moveNextStatus();\n    }\n\n}\n\n"]}