{"version":3,"sources":["file:///E:/2.workspace/cocos%20creator/slot/SlotMachine/assets/scripts/Global/AudioManager.ts"],"names":["_decorator","Component","assert","clamp01","ccclass","property","AudioManager","instance","_instance","init","audioSource","_audioSource","playMusic","loop","playing","playSound","name","volumeScale","playOneShot","audioClip","setMusicVolume","flag","volume"],"mappings":";;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AACYC,MAAAA,M,OAAAA,M;AAAcC,MAAAA,O,OAAAA,O;;;;;;;OACzC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;8BAGjBM,Y,WADZF,OAAO,CAAC,cAAD,C,2BAAR,MACaE,YADb,SACmCL,SADnC,CAC6C;AAKtB,mBAARM,QAAQ,GAAI;AACnB,cAAI,KAAKC,SAAT,EAAoB;AAChB,mBAAO,KAAKA,SAAZ;AACH;;AAED,eAAKA,SAAL,GAAiB,IAAIF,YAAJ,EAAjB;AACA,iBAAO,KAAKE,SAAZ;AACH;AAED;;;AACAC,QAAAA,IAAI,CAAEC,WAAF,EAA4B;AAC5BJ,UAAAA,YAAY,CAACK,YAAb,GAA4BD,WAA5B;AACH;AAEC;AACN;AACA;AACA;;;AACIE,QAAAA,SAAS,CAAEC,IAAF,EAAiB;AACtB,gBAAMH,WAAW,GAAGJ,YAAY,CAACK,YAAjC;AACAT,UAAAA,MAAM,CAACQ,WAAD,EAAc,0BAAd,CAAN;AAEAA,UAAAA,WAAW,CAACG,IAAZ,GAAmBA,IAAnB;;AACA,cAAI,CAACH,WAAW,CAACI,OAAjB,EAA0B;AACtBJ,YAAAA,WAAW,CAACI,OAAZ;AACH;AACJ;AAEA;AACL;AACA;AACA;AACA;;;AACIC,QAAAA,SAAS,CAAEC,IAAF,EAAgBC,WAAmB,GAAG,CAAtC,EAA0C;AAC/C,gBAAMP,WAAW,GAAGJ,YAAY,CAACK,YAAjC;AACAT,UAAAA,MAAM,CAACQ,WAAD,EAAc,0BAAd,CAAN,CAF+C,CAI/C;;AACAA,UAAAA,WAAW,CAACQ,WAAZ,CAAwBC,SAAxB,EAAmCF,WAAnC;AAEH,SA7CwC,CA8CzC;;;AACAG,QAAAA,cAAc,CAAEC,IAAF,EAAgB;AAC1B,gBAAMX,WAAW,GAAGJ,YAAY,CAACK,YAAjC;AACAT,UAAAA,MAAM,CAACQ,WAAD,EAAc,0BAAd,CAAN;AAEAW,UAAAA,IAAI,GAAGlB,OAAO,CAACkB,IAAD,CAAd;AACAX,UAAAA,WAAW,CAACY,MAAZ,GAAqBD,IAArB;AACH;;AArDwC,O,UAE1Bb,S,mBACAG,Y","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nimport { AudioClip, AudioSource, assert, warn, clamp01, resources } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass('AudioManager')\nexport class AudioManager  extends Component {\n\n    private static _instance: AudioManager;\n    private static _audioSource?: AudioSource;\n\n    static get instance () {\n        if (this._instance) {\n            return this._instance;\n        }\n\n        this._instance = new AudioManager();\n        return this._instance;\n    }\n\n    /**Manager initialization*/\n    init (audioSource: AudioSource) {\n        AudioManager._audioSource = audioSource;\n    }\n\n      /**\n     * Play music\n     * @param {Boolean} loop Whether to loop\n     */\n    playMusic (loop: boolean) {\n        const audioSource = AudioManager._audioSource!\n        assert(audioSource, 'AudioManager not inited!');\n\n        audioSource.loop = loop;\n        if (!audioSource.playing) {\n            audioSource.playing();\n        }\n    }\n\n     /**\n     * Play a sound effect\n     * @param {String} name The name of the sound effect\n     * @param {Number} volumeScale Playback volume multiplier\n     */\n    playSound (name: string, volumeScale: number = 1 ) {\n        const audioSource = AudioManager._audioSource!\n        assert(audioSource, 'AudioManager not inited!');\n\n        // Note that the second parameter \"volumeScale\" is a multiple of the playback volume, the final playback volume is \"audioSource.volume * volumeScale\"\n        audioSource.playOneShot(audioClip, volumeScale);\n\n    }\n    // Set the music volume\n    setMusicVolume (flag: number) {\n        const audioSource = AudioManager._audioSource!\n        assert(audioSource, 'AudioManager not inited!');\n\n        flag = clamp01(flag);\n        audioSource.volume = flag;\n    }\n\n}"]}